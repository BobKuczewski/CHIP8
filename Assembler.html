<!DOCTYPE html>
<html>

<head>
<title>CHIP-8 Assembler/Disassembler</title>
<meta charset="utf-8"/>
</head>

<style>
.sel {
  FONT-WEIGHT: bold;
	COLOR: #000000;
  BACKGROUND-COLOR: #ffff00;
}
</style>

<script>
var num_matched = 0;
var full_text = "Four score and seven years ago ...";
var last_index = -1;
var random_sentence = "";

function highlight_random_sentence () {
  var start = "<span class=\"sel\">";
  var end = "</span>";
  // var full_text = document.getElementById ( "IDX_drawing_area" );
  var splits = full_text.split(".");
  var parts = [];
  for (var i=0; i<splits.length; i++) {
    if (splits[i].length > 0) {
      parts.push ( splits[i] );
    }
  }
  var highlight_index = Math.floor ( Math.random() * parts.length );
  while (highlight_index == last_index) {
    highlight_index = Math.floor ( Math.random() * parts.length );
  }
  last_index = highlight_index;
  var new_text = "";
  for (var i=0; i<parts.length; i++) {
    if (i == highlight_index) {
      random_sentence = parts[i].trim() + ".";
      if (parts[i][0] == " ") {
        new_text = new_text + " " + start + parts[i].trim();
      } else {
        new_text = new_text + start + parts[i];
      }
      new_text = new_text + "." + end;
    } else {
      new_text = new_text + parts[i] + ".";
    }
  }
  document.getElementById ( "selectable_text" ).innerHTML = new_text;
}

function check_for_matched () {
  var pasted_text = document.getElementById ( "pasted" );
  if (pasted_text.value.trim() == random_sentence.trim()) {
    num_matched += 1;
    /*
    if (num_matched >= 3) {
      var next_event = document.getElementById ("next_event");
      next_event.innerHTML = "<b> &nbsp; &nbsp; <a href=\"ComputerSkillsOlympics.html\">Next Event</a></b>";
    } else {
      highlight_random_sentence();
    }
    */
    highlight_random_sentence();    
  }
  pasted_text.value = "";
}

</script>

<body bgcolor="lightblue" onload="highlight_random_sentence()">
<center>

<span id="title"><b>CHIP-8 Assembler/Disassembler</b></span>
<p/>
<table width="100%" style="padding:10px; border-spacing:2px; border:4px solid black; background-color:#dddddd; text-align:left; font-family: Arial, Helvetica, sans-serif; font-size: 14px;" >
  <colgroup>
    <col>
    <col>
  </colgroup>
  <thead>
    <tr>
      <th style="text-align:center; padding:10px; border-spacing:2px; border:2px solid black; background-color:#aaffff;">Source Code</th>
      <th></th>
      <th style="text-align:center; padding:10px; border-spacing:2px; border:2px solid black; background-color:#aaffff;">Machine Code</th>
    </tr>
  </thead>
	<tbody>
  	<tr>
      <td valign="top">
				<center>
				<textarea id="source" rows="25" cols="36"></textarea>
				</center>
			</td>
			<td>
				<input type="button" name="assem" value="==>" onclick="check_for_matched();"></input>
				<p/>
				<input type="button" name="disassem" value="<==" onclick="check_for_matched();"></input>
				<p/>
				<input type="button" name="intelhex" value="IHex" onclick="check_for_matched();"></input>
			</td>
      <td valign="top">
				<center>
				<textarea id="machine" rows="25" cols="36"></textarea>
				</center>
			</td>
		</tr>
	</tbody>
</table>

</body>

</center>

</html>

